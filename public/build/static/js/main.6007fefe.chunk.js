(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{34:function(e,t,n){},62:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(35),s=n.n(c),i=n(9),o=n(3),l=n(4),d=n(6),u=n(5),h=n(36),p=n.n(h).a.create({baseURL:"https://pkmn-shop.herokuapp.com",withCredentials:!0});function j(e){if(e.response.data)throw console.log(e.response&&e.response.data),e;throw e}var b={service:p,signup:function(e){return p.post("/api/auth/signup",e).then((function(e){return e.data})).catch(j)},signin:function(e){return p.post("/api/auth/signin",e).then((function(e){return e.data})).catch(j)},logout:function(){return p.get("/api/auth/logout").then((function(e){return e.data})).catch(j)},isLoggedIn:function(){return p.get("/api/users/profile").then((function(e){return e.data})).catch(j)},getOneCard:function(e){return p.get("/api/me/cards/"+e).then((function(e){return e.data})).catch(j)},getItems:function(){return p.get("/api/pokemonApi/all").then((function(e){return e.data})).catch(j)},getOneCardFromApi:function(e){return p.get("/api/pokemonApi/".concat(e)).then((function(e){return e.data})).catch(j)},getApiByPage:function(e){return p.get("/api/pokemonApi/all/".concat(e)).then((function(e){return e.data})).catch(j)},filterApiByName:function(e,t){return p.get("/api/pokemonApi/search/".concat(e,"/").concat(t)).then((function(e){return e.data})).catch(j)},getAllUserCards:function(){return p.get("/api/me/cards").then((function(e){return e.data})).catch(j)},addCard:function(e){return p.post("/api/me/cards/add",e).then((function(e){return e.data})).catch(j)},updateCard:function(e,t){return p.patch("/api/me/cards/".concat(e,"/edit"),t).then((function(e){return e.data})).catch(j)},getUserCollection:function(e){return p.get("/api/me/collection/".concat(e)).then((function(e){return e.data})).catch(j)},getOneUserCard:function(e){return p.get("/api/me/cards/"+e).then((function(e){return e.data})).catch(j)},createBid:function(e){return p.post("/api/bids/create",e).then((function(e){return e.data})).catch(j)},deleteBid:function(e){return p.delete("/api/bids/".concat(e)).then((function(e){return e.data})).catch(j)},findCardsOnSale:function(){return p.get("/api/bids").then((function(e){return e.data})).catch(j)},findUserAuctions:function(){return p.get("/api/profile/auctions").then((function(e){return e.data})).catch(j)},findAuction:function(e){return p.get("/api/bids/".concat(e)).then((function(e){return e.data})).catch(j)},updatedBids:function(e,t){return p.patch("/api/bids/".concat(e),t).then((function(e){return e.data})).catch(j)},getAllUserCardsFromApiCard:function(e){return p.get("/api/me/cards/all/"+e).then((function(e){return e.data})).catch(j)},getCardsOnSale:function(e){return p.get("/api/cards/bids/"+e).then((function(e){return e.data})).catch(j)},getAllCardsOpenForExchange:function(){return p.get("/api/exchanges").then((function(e){return e.data})).catch(j)},getAllCardsOneOfApiIdOpenForExchange:function(e){return p.get("/api/exchanges/"+e).then((function(e){return e.data})).catch(j)},createExchange:function(e){return p.post("/api//profile/exchanges/create",e).then((function(e){return e.data})).catch(j)},getExchangeOffers:function(){return p.get("/api/profile/exchanges").then((function(e){return e.data})).catch(j)},deleteExchange:function(e){return p.delete("/api/profile/exchanges/".concat(e)).then((function(e){return e.data})).catch(j)},getExchangeBySellerItem:function(e){return p.get("/api/profile/exchanges/".concat(e)).then((function(e){return e.data})).catch(j)}},f=r.a.createContext(),x=n(0),O=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={user:null,isLoggedIn:!1,isLoading:!0},e.setUser=function(t){e.setState({user:t,isLoggedIn:!0})},e.removeUser=function(){e.setState({user:null,isLoggedIn:!1})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;b.isLoggedIn().then((function(t){e.setState({user:t,isLoggedIn:!0,isLoading:!1})})).catch((function(t){e.setState({user:null,isLoggedIn:!1,isLoading:!1})}))}},{key:"render",value:function(){var e={user:this.state.user,setUser:this.setUser,removeUser:this.removeUser,isLoggedIn:this.state.isLoggedIn,isLoading:this.state.isLoading};return Object(x.jsx)(f.Provider,{value:e,children:this.props.children})}}]),n}(a.Component),m=n(10),g=n(8),v=function(e){return function(t){return Object(x.jsx)(f.Consumer,{children:function(n){return Object(x.jsx)(e,Object(g.a)(Object(g.a)({},t),{},{context:n}))}})}},k=(n(62),v((function(e){var t=e.context;return Object(x.jsxs)("nav",{className:"NavMain navbar",children:[Object(x.jsx)("div",{className:"home-div",children:Object(x.jsx)(i.c,{exact:!0,to:"/",children:Object(x.jsx)("img",{className:"pokeball-logo",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/53/Pok%C3%A9_Ball_icon.svg/1200px-Pok%C3%A9_Ball_icon.svg.png",alt:""})})}),Object(x.jsxs)("ul",{className:"nav-list",children:[t.isLoggedIn&&Object(x.jsxs)(r.a.Fragment,{children:[Object(x.jsx)("li",{children:Object(x.jsx)(i.c,{to:"/cards",className:"NavLink",children:"All Cards"})}),Object(x.jsx)("li",{children:Object(x.jsx)(i.c,{to:"/profile/cards",className:"NavLink",children:"My Cards"})}),Object(x.jsx)("li",{children:Object(x.jsxs)("div",{className:"dropdown",children:[Object(x.jsxs)("button",{className:"dropbtn NavLink",children:["Shop",Object(x.jsx)("i",{className:"fa fa-caret-down"})]}),Object(x.jsxs)("div",{className:"dropdown-content",children:[Object(x.jsx)(i.c,{to:"/auctions",className:"NavLink",children:"All Auctions"}),Object(x.jsx)(i.c,{to:"/exchanges",className:"NavLink",children:"All Exchanges"}),Object(x.jsx)(i.c,{to:"/profile/auctions",className:"NavLink",children:"My Auctions"}),Object(x.jsx)(i.c,{to:"/profile/exchanges",className:"NavLink",children:"My Exchanges"})]})]})}),Object(x.jsx)("li",{children:Object(x.jsx)(i.c,{to:"/profile",className:"NavLink",children:t.user&&t.user.email})}),Object(x.jsx)("li",{children:Object(x.jsx)("p",{onClick:function(){b.logout().then((function(){t.removeUser()})).catch((function(e){console.log(e)}))},className:"NavLink",children:"Logout"})})]}),!t.isLoggedIn&&Object(x.jsxs)(r.a.Fragment,{children:[Object(x.jsx)("li",{children:Object(x.jsx)(i.c,{to:"/signin",className:"NavLink",children:"Log in"})}),Object(x.jsx)("li",{children:Object(x.jsx)(i.c,{to:"/signup",className:"NavLink",children:"Create account"})})]})]})]})}))),C=(n(68),v(function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(x.jsxs)("div",{className:"main-div",children:[Object(x.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/1a/Pok%C3%A9mon_Trading_Card_Game_logo.svg/1280px-Pok%C3%A9mon_Trading_Card_Game_logo.svg.png",alt:""}),Object(x.jsx)("div",{className:"template-button",children:Object(x.jsx)(i.b,{to:"/cards",children:"See all cards"})})]})}}]),n}(r.a.Component))),y=n(16),w=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:""},e.handleChange=function(t){var n=t.target.name,a=t.target.value;e.setState(Object(y.a)({},n,a))},e.handleSubmit=function(t){t.preventDefault(),b.signin(e.state).then((function(t){e.props.context.setUser(t)})).catch((function(e){console.log(e)}))},e}return Object(l.a)(n,[{key:"render",value:function(){return this.props.context.user?Object(x.jsx)(m.a,{to:"/"}):Object(x.jsx)("div",{className:"signin-div",children:Object(x.jsxs)("form",{onChange:this.handleChange,onSubmit:this.handleSubmit,children:[Object(x.jsx)("h2",{children:"Signin"}),Object(x.jsx)("label",{htmlFor:"email",children:"Email"}),Object(x.jsx)("input",{type:"email",id:"email",name:"email"}),Object(x.jsx)("label",{htmlFor:"password",children:"Password"}),Object(x.jsx)("input",{type:"password",id:"password",name:"password"}),Object(x.jsx)("button",{className:"template-button-all-cards",children:"Submit"})]})})}}]),n}(a.Component),A=Object(m.g)(v(w)),S=(n(69),function(e){return Object(x.jsx)(A,{})}),I=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:"",username:""},e.handleChange=function(t){var n=t.target.value,a=t.target.name;e.setState(Object(y.a)({},a,n))},e.handleSubmit=function(t){t.preventDefault(),b.signup(e.state).then((function(){e.props.history.push("/signin")})).catch((function(e){console.log(e)}))},e}return Object(l.a)(n,[{key:"render",value:function(){return this.props.context.user?Object(x.jsx)(m.a,{to:"/"}):Object(x.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(x.jsx)("h2",{children:"Signup"}),Object(x.jsx)("label",{htmlFor:"username",children:"Username"}),Object(x.jsx)("input",{onChange:this.handleChange,value:this.state.username,type:"username",id:"username",name:"username"}),Object(x.jsx)("label",{htmlFor:"email",children:"Email"}),Object(x.jsx)("input",{onChange:this.handleChange,value:this.state.email,type:"email",id:"email",name:"email"}),Object(x.jsx)("label",{htmlFor:"password",children:"Password"}),Object(x.jsx)("input",{onChange:this.handleChange,value:this.state.password,type:"password",id:"password",name:"password"}),Object(x.jsx)("button",{className:"template-button-all-cards",children:"Submit"})]})}}]),n}(a.Component),N=Object(m.g)(v(I)),F=function(e){return Object(x.jsx)(N,{})},B=n(38),L=["component","context"],E=v((function(e){var t=e.component,n=e.context,a=Object(B.a)(e,L);return n.isLoading?null:n.isLoggedIn?Object(x.jsx)(m.b,Object(g.a)(Object(g.a)({},a),{},{render:function(e){return Object(x.jsx)(t,Object(g.a)({},e))}})):Object(x.jsx)(m.a,{to:"/signin"})})),_=function(e){return Object(x.jsx)("div",{children:Object(x.jsx)("h1",{children:"Hello User"})})},P=n(2),T=n.n(P),D=n(7),G=n(19),U=(n(71),function(e){return Object(x.jsxs)("div",{className:"cardDiv",children:[Object(x.jsx)("img",{src:e.card.images.small,alt:"",height:"400px",width:"350px"}),Object(x.jsx)("h2",{children:e.card.name}),Object(x.jsx)("div",{children:e.children})]},e.key)}),M=n(17),R=function(e){return Object(x.jsxs)("div",{className:"FormField",children:[Object(x.jsx)("label",{htmlFor:e.htmlFor,children:e.label}),e.children]})},H=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.props.handleChange(e.target.value)},a.handleClick=function(){a.props.handleClick()},a.handleReset=function(){a.props.handleReset()},a.handleChange=a.handleChange.bind(Object(M.a)(a)),a.handleClick=a.handleClick.bind(Object(M.a)(a)),a.handleReset=a.handleReset.bind(Object(M.a)(a)),a}return Object(l.a)(n,[{key:"render",value:function(){return Object(x.jsxs)("div",{className:"SearchBar",children:[Object(x.jsx)(R,{children:Object(x.jsx)("input",{type:"text",value:this.props.name,onChange:this.handleChange})}),Object(x.jsxs)("div",{children:[Object(x.jsx)("button",{onClick:this.handleClick,className:"template-button-all-cards",children:"Search"}),Object(x.jsx)("button",{onClick:this.handleReset,className:"template-button-all-cards",children:"Reset search"})]})]})}}]),n}(a.Component),Y=function(){return Object(x.jsx)("div",{children:Object(x.jsx)("p",{children:"Wait a bit... we need to catch 'em all ! "})})},W=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={cards:[],loading:!1,loadingItems:!1,page:1,prevY:0,name:""},e.getPokemonsByName=function(t,n){e.setState({loading:!0,page:1,prevY:0,cards:[]}),b.filterApiByName(t,n).then((function(t){e.setState({cards:[].concat(Object(G.a)(e.state.cards),Object(G.a)(t.data))}),e.setState({loading:!1})})).catch((function(e){return console.log(e)}))},e.handleChange=function(t){e.setState({name:t})},e.handleClick=function(){e.getPokemonsByName(e.state.name,e.state.page)},e.handleReset=function(){e.getAllPokemons(e.state.page)},e.addCard=function(){var e=Object(D.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.addCard({pokemonTCGId:t});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"getAllPokemons",value:function(e){var t=this;this.setState({loading:!0,page:1,prevY:0,cards:[],name:""}),b.getApiByPage(e).then((function(e){t.setState({cards:[].concat(Object(G.a)(t.state.cards),Object(G.a)(e.data))}),t.setState({loading:!1})})).catch((function(e){console.log(e)}));this.observer=new IntersectionObserver(this.handleObserver.bind(this),{root:null,rootMargin:"0px",threshold:1}),this.observer.observe(this.loadingRef)}},{key:"handleObserver",value:function(e,t){var n=e[0].boundingClientRect.y;if(this.state.prevY>n){var a=this.state.page+1;""!==this.state.name?this.getPokemonsByName(this.state.name,a):this.getAllPokemons(a),this.setState({page:a})}this.setState({prevY:n})}},{key:"componentDidMount",value:function(){this.getAllPokemons(this.state.page)}},{key:"render",value:function(){var e=this,t={display:this.state.loadingItems?"block":"none"};return Object(x.jsxs)("div",{className:"container",children:[Object(x.jsxs)("div",{className:"search-div",children:[Object(x.jsx)("h1",{children:"Search for a Pokemon ! "}),Object(x.jsx)(H,{name:this.state.name,handleChange:this.handleChange,handleClick:this.handleClick,handleReset:this.handleReset})]}),this.state.loading&&Object(x.jsx)(Y,{}),Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{style:{minHeight:"800px",display:"flex",flexWrap:"wrap"},children:this.state.cards.map((function(e){return Object(x.jsx)(U,{card:e,children:Object(x.jsx)("div",{children:Object(x.jsx)(i.b,{to:"/cards/"+e.id,className:"template-button-all-cards",children:"Card details"})})})}))}),Object(x.jsx)("div",{ref:function(t){return e.loadingRef=t},style:{height:"100px",margin:"30px"},children:this.state.cards.length>0&&Object(x.jsx)(Y,{style:t})})]})]})}}]),n}(a.Component),J=v(function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleAdd=function(){e.props.getUserCardsFromModel()},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.children.userCards;return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{children:[this.props.context.isLoggedIn&&0===e.length&&Object(x.jsx)("button",{onClick:this.props.addCard,className:"template-button-all-cards",children:"Add to my collection"})," ",this.props.context.isLoggedIn&&e.length>0&&Object(x.jsxs)("div",{children:[Object(x.jsxs)("p",{children:["You have ",e.length," ",1===e.length?"version":"versions"," of this card."]}),Object(x.jsx)("button",{onClick:this.props.addCard,className:"template-button-all-cards",children:"Add another to my collection"})]}),this.props.context.isLoggedIn&&e.map((function(e){return Object(x.jsx)("div",{},e._id)})),this.props.context.isLoggedIn&&Object(x.jsx)("h2",{children:"All the current offers : "}),this.props.context.isLoggedIn&&Object(x.jsx)("div",{children:"See offers"})," "]})})}}]),n}(a.Component)),$=(n(72),v(function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a,r;return Object(o.a)(this,n),(r=t.call(this,e)).getCurrentAuction=function(){var e=Object(D.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.findAuction(t).then((function(e){r.setState({auction:e})})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.handleChange=function(e){var t=e.target.name,n=e.target.value;r.setState(Object(y.a)({},t,n))},r.updateAuction=function(e){r.props.updateAuction(e)},r.handleSubmit=function(){var e=Object(D.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.state.currentBid<r.state.previousBid&&console.log("current bid is too low"),n={currentBid:r.state.currentBid},e.next=4,b.updatedBids(t,n).then((function(e){r.setState({auction:e})})).catch((function(e){return console.log(e)}));case 4:r.displayCurrentBid();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.finalFunction=function(){var e=Object(D.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.handleSubmit(t);case 3:return e.next=5,r.handleBid();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),r.displayCurrentBid=function(){r.props.offer.bid.buyer===r.props.context.user._id&&r.setState({hasHighestBid:!0})},r.state={currentBid:0,previousBid:(null===(a=r.props.offer.bid)||void 0===a?void 0:a.currentBid)||0,auction:{},hasHighestBid:!1},r.timer=null,r.updateAuction=r.updateAuction.bind(Object(M.a)(r)),r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getCurrentAuction(this.props.offer.bid._id),this.props.context.isLoggedIn&&this.displayCurrentBid()}},{key:"componentDidUpdate",value:function(){var e=Object(D.a)(T.a.mark((function e(){var t=this;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.timer=setTimeout((function(){t.getCurrentAuction(t.props.offer.bid._id)}),5e3);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=Object(D.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:clearTimeout(this.timer);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:this.props.offer.owner.email}),Object(x.jsx)("td",{children:this.props.offer.cardState}),Object(x.jsxs)("td",{children:[this.props.offer.bid.initialPrice," $"]}),Object(x.jsx)("td",{children:this.state.auction.currentBid?"".concat(this.state.auction.currentBid," $"):"Be the first to Bid"}),Object(x.jsxs)("td",{children:[this.state.hasHighestBid&&Object(x.jsx)("div",{children:Object(x.jsx)("p",{children:"You're in the lead !"})}),!this.state.hasHighestBid&&Object(x.jsx)("input",{type:"number",name:"currentBid",value:this.state.currentBid,onChange:this.handleChange})]}),Object(x.jsx)("td",{children:!this.state.hasHighestBid&&Object(x.jsx)("button",{onClick:function(){return e.handleSubmit(e.state.auction._id)},children:"Place Bid"})})]},this.state.auction._id)}}]),n}(a.Component))),q=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return console.log(this.props),Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{children:"All the auctions"}),Object(x.jsxs)("table",{children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Seller"}),Object(x.jsx)("td",{children:"Card State"}),Object(x.jsx)("td",{children:"Initial Price"}),Object(x.jsx)("td",{children:"Current Bid"}),Object(x.jsx)("td",{children:"Your offer"}),Object(x.jsx)("td",{children:"Confirm"})]})}),Object(x.jsx)("tbody",{children:this.props.auctions.map((function(t){return Object(x.jsx)($,{offer:t,updateAuction:e.props.updateAuction})}))})]})]})}}]),n}(a.Component),z=(n(34),function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(x.jsxs)("div",{className:"info-container",children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("h2",{className:"pokemon-name",children:this.props.pokemon.name}),Object(x.jsxs)("div",{className:"pokemon-type",children:[Object(x.jsxs)("h3",{children:[this.props.pokemon.subtypes[0]," ",this.props.pokemon.supertype]}),Object(x.jsxs)("p",{children:["Health : ",this.props.pokemon.hp," HP"]})]})]}),Object(x.jsxs)("div",{className:"attacks",children:[Object(x.jsx)("h2",{children:"Attacks : "}),this.props.pokemon.attacks.map((function(e){return Object(x.jsxs)("div",{children:[Object(x.jsxs)("p",{children:[Object(x.jsx)("b",{children:e.name}),Object(x.jsxs)("span",{children:[" ",e.damage," "]})]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("b",{children:"Description : "}),e.text]})]})}))]}),Object(x.jsxs)("div",{className:"pokemon-div-3",children:[Object(x.jsxs)("div",{className:"w-r-rc",children:[Object(x.jsx)("h2",{children:"Weaknesses : "}),Object(x.jsx)("div",{children:this.props.pokemon.weaknesses&&this.props.pokemon.weaknesses.map((function(e){return Object(x.jsx)("div",{children:Object(x.jsxs)("p",{children:[Object(x.jsxs)("b",{children:[e.type," :"]})," ",e.value]})})}))}),Object(x.jsxs)("div",{children:[Object(x.jsx)("h2",{children:"Resistances : "}),this.props.pokemon.resistances&&this.props.pokemon.resistances.map((function(e){return Object(x.jsx)("div",{children:Object(x.jsxs)("p",{children:[" ",Object(x.jsxs)("b",{children:[e.type," :"]})," ",e.value]})})})),this.props.pokemon.resistances&&Object(x.jsxs)("p",{children:[this.props.pokemon.resistances.type," ",Object(x.jsx)("span",{children:this.props.pokemon.resistances.value})]})]})]}),Object(x.jsxs)("div",{className:"set",children:[Object(x.jsx)("h2",{children:"Set :"}),Object(x.jsxs)("div",{children:[Object(x.jsxs)("p",{children:[Object(x.jsx)("b",{children:this.props.pokemon.set.name})," \u2013 ",this.props.pokemon.name]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("b",{children:"Rarity : "}),this.props.pokemon.number,"/",this.props.pokemon.set.total," ",this.props.pokemon.rarity]})]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("b",{children:"Set Symbol :"})," "]}),Object(x.jsx)("img",{src:this.props.pokemon.set.images.symbol,alt:"symbol set"})]})]}),Object(x.jsx)("div",{children:Object(x.jsxs)("p",{children:[" ",Object(x.jsx)("b",{children:"Illustrator :"})," ",this.props.pokemon.artist]})})]})}}]),n}(a.Component)),K=(n(73),function(e){return Object(x.jsxs)("div",{className:"container",children:[Object(x.jsx)("div",{children:Object(x.jsx)("img",{src:e.pokemon.images.large,alt:"card"})}),Object(x.jsx)(z,{pokemon:e.pokemon,className:"card-info-div"})]})}),Q=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(t){e.props.handleChange(t)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(x.jsx)("div",{children:this.props.cards.map((function(t){return Object(x.jsxs)("div",{children:[Object(x.jsx)("input",{type:"checkbox",id:t._id,onChange:e.props.handleChange}),Object(x.jsxs)("label",{htmlFor:"items",children:[t.pokemonTCGId.name," \u2013 ",t._id]})]},t._id)}))})}}]),n}(a.Component),V=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={callBox:!1,loading:!1,cards:[],exchangeItems:[],loadingItems:!0,exchangeExists:!1},e.addCard=function(t){var n=e.state.exchangeItems;n.push(t),e.setState({exchangeItems:n})},e.deleteCard=function(t){var n=Object(G.a)(e.state.exchangeItems).filter((function(e){return e!==t}));e.setState({exchangeItems:n})},e.handleChange=function(t){t.target.checked?e.addCard(t.target.id):e.deleteCard(t.target.id)},e.handleSubmit=Object(D.a)(T.a.mark((function t(){var n;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={seller:e.props.listing.owner._id,sellerItem:e.props.listing._id,buyerItem:e.state.exchangeItems},t.prev=1,t.next=4,b.createExchange(n);case 4:e.setState({callBox:!1}),e.getTheExchange(e.props.listing._id),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])}))),e.getAllUserCards=Object(D.a)(T.a.mark((function t(){var n,a,r,c;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.next=3,b.getAllUserCards();case 3:return n=t.sent,a=n.map((function(e){return b.getOneCardFromApi(e.pokemonTCGId)})),t.next=7,Promise.all(a);case 7:r=t.sent,c=n.map((function(e,t){return Object(g.a)(Object(g.a)({},e),{},{pokemonTCGId:r[t]})})),e.setState({cards:c,loadingItems:!1});case 10:case"end":return t.stop()}}),t)}))),e.handleClick=function(){e.setState({loadingItems:!0,callBox:!0}),e.getAllUserCards()},e.getTheExchange=function(){var t=Object(D.a)(T.a.mark((function t(n){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.getExchangeBySellerItem(n).then((function(t){t.length>0?e.setState({exchangeExists:!0}):e.setState({exchangeExists:!1})})).catch((function(t){console.log(t),e.setState({exchangeExists:!1})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(D.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({loading:!1}),this.getTheExchange(this.props.listing._id);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:this.props.listing.owner.email}),Object(x.jsxs)("td",{children:[!this.props.listing.cardState&&Object(x.jsx)("p",{children:"N/D"}),this.props.listing.cardState&&this.props.listing.cardState]}),Object(x.jsxs)("td",{children:[Object(x.jsx)("button",{onClick:this.handleClick,children:"Select cards"}),Object(x.jsxs)("div",{children:[this.state.callBox&&this.state.loadingItems&&Object(x.jsx)("div",{children:Object(x.jsx)("p",{children:"Catching all your pokemons... plz hooold"})}),this.state.callBox&&Object(x.jsx)(Q,{getUserCards:this.getUserCards,cards:this.state.cards,exchangeItems:this.state.exchangeItems,handleChange:this.handleChange}),this.state.callBox&&0===this.state.cards.length&&!this.state.loading&&Object(x.jsx)("div",{children:"You have no cards to exchange !"})]})]}),Object(x.jsx)("td",{children:Object(x.jsx)("ul",{children:this.state.exchangeItems.map((function(e){return Object(x.jsx)("li",{children:e})}))})}),Object(x.jsxs)("td",{children:[!this.state.exchangeExists&&Object(x.jsx)("button",{onClick:this.handleSubmit,children:"Confirm offer"}),this.state.exchangeExists&&Object(x.jsx)("p",{children:"Here is your offer"})]})]},this.props.listing._id)}}]),n}(a.Component),X=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{children:"All listings open for exchange"}),Object(x.jsxs)("table",{children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Owner"}),Object(x.jsx)("td",{children:"Card state"}),Object(x.jsx)("td",{children:"What do you wanna exchange ?"}),Object(x.jsx)("td",{children:"Your current offer"}),Object(x.jsx)("td",{children:"Confirm offer"})]})}),Object(x.jsx)("tbody",{children:this.props.offers.map((function(t){return Object(x.jsx)(V,{listing:t,pokemon:e.props.pokemon})}))})]})]})}}]),n}(a.Component),Z=v(function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={loading:!0,pokemon:null,userCards:[],formDisplayed:!1,cardsOnSale:[],cardsOpenForExchange:[],message:""},e.getInfoCardFromApi=function(){var t=Object(D.a)(T.a.mark((function t(n){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.getOneCardFromApi(n).then((function(t){e.setState({pokemon:t})})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getUserCardsFromModel=function(){var t=Object(D.a)(T.a.mark((function t(n){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.getAllUserCardsFromApiCard(n).then((function(t){e.setState({userCards:t})})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getOngoingAuctions=function(){var t=Object(D.a)(T.a.mark((function t(n){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.getCardsOnSale(n).then((function(t){e.setState({cardsOnSale:t})})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getCardsOpenForExchange=function(){var t=Object(D.a)(T.a.mark((function t(n){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.getAllCardsOneOfApiIdOpenForExchange(n).then((function(t){e.setState({cardsOpenForExchange:t})})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.addCard=Object(D.a)(T.a.mark((function t(){var n;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.addCard({pokemonTCGId:e.props.match.params.id});case 3:return t.next=5,b.getAllUserCardsFromApiCard(e.state.pokemon.id);case 5:n=t.sent,e.setState({userCards:n}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])}))),e.updateAuction=function(t){e.getOngoingAuctions(t)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(D.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getInfoCardFromApi(this.props.match.params.id);case 2:return e.next=4,this.getUserCardsFromModel(this.props.match.params.id);case 4:return e.next=6,this.getOngoingAuctions(this.props.match.params.id);case 6:return e.next=8,this.getCardsOpenForExchange(this.props.match.params.id);case 8:return e.next=10,this.setState({loading:!1});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.loading?Object(x.jsx)(Y,{}):Object(x.jsxs)("div",{className:"OneCard",children:[Object(x.jsx)(K,{pokemon:this.state.pokemon}),Object(x.jsx)(J,{addCard:this.addCard,putCardOnSale:this.putCardOnSale,showForm:this.displaySaleForm,children:this.state}),Object(x.jsxs)("section",{className:"shop-section",children:[Object(x.jsx)("h1",{children:"How to get this card ?"}),this.state.cardsOnSale.length>0?Object(x.jsx)(q,{auctions:this.state.cardsOnSale,updateAuction:this.updateAuction}):Object(x.jsx)("div",{children:"There are no ongoing auctions for this model."}),this.state.cardsOpenForExchange.length>0?Object(x.jsx)(X,{offers:this.state.cardsOpenForExchange,pokemon:this.state.pokemon}):Object(x.jsx)("div",{children:"No card is open for exchange for now."})]})]})}}]),n}(a.Component)),ee=function(e){return Object(x.jsxs)("div",{className:"cardDiv",children:[Object(x.jsx)(U,{card:e.card.pokemonTCGId,link:"/profile/cards/"+e.card._id}),Object(x.jsxs)("div",{children:[Object(x.jsx)("h2",{children:Object(x.jsxs)("b",{children:["Average price: ",e.card.pokemonTCGId.cardmarket.prices.averageSellPrice]})}),Object(x.jsx)(i.b,{to:"/cards/"+e.card.pokemonTCGId.id,className:"template-button-all-cards",children:"Auction Details"})]})]},e.card._id)},te=(n(74),function(e){return Object(x.jsx)("div",{className:"Message",children:e.children})}),ne=function(e){return Object(x.jsx)("div",{children:e.children})},ae=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={cards:[]},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(D.a)(T.a.mark((function e(){var t,n,a,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.findCardsOnSale();case 2:return t=e.sent,n=t.map((function(e){return b.getOneCardFromApi(e.pokemonTCGId)})),e.next=6,Promise.all(n);case 6:a=e.sent,r=t.map((function(e,t){return Object(g.a)(Object(g.a)({},e),{},{pokemonTCGId:a[t]})})),this.setState({cards:r});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(x.jsxs)("div",{children:[Object(x.jsx)("h1",{children:"Ongoing auctions"}),Object(x.jsxs)(ne,{children:[Object(x.jsx)("p",{children:"Here are all the ongoing auctions. You can place a bid in order to acquire those cards."}),Object(x.jsx)("p",{children:'Each item in this list represent a model of Pokemon card. To see all the auctions for this model, click on "Auction Details".'})]}),0===this.state.cards.length&&Object(x.jsx)(te,{children:Object(x.jsx)("p",{children:"There are no ongoing auctions."})}),Object(x.jsx)("div",{className:"auctions-div",children:this.state.cards.map((function(e){return Object(x.jsx)(ee,{card:e})}))})]})}}]),n}(a.Component),re=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={user:{},card:null,isLoggedIn:!1,initialPrice:0,endDate:"",cardState:""},e.handleChange=function(t){e.setState(Object(y.a)({},t.target.name,t.target.value))},e.closeForm=function(){e.props.closeForm()},e.createBid=function(){var t=Object(D.a)(T.a.mark((function t(n){var a,r;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a={item:e.props.card._id,initialPrice:e.state.initialPrice,startDate:Date.now(),endDate:e.state.endDate,status:"ongoing"},t.next=4,b.createBid(a);case 4:return r=t.sent,console.log(r),t.next=8,b.updateCard(e.props.card._id,{onSale:!0,price:e.state.initialPrice,bid:r._id,cardState:e.state.cardState});case 8:e.closeForm();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(D.a)(T.a.mark((function e(){var t,n=this;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.isLoggedIn().then((function(e){n.setState({user:e,isLoggedIn:!0})})).catch((function(e){n.setState({user:null,isLoggedIn:!1})}));case 3:return e.next=5,b.getOneCard(this.props.card._id);case 5:t=e.sent,this.setState({card:t}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return null===this.state.pokemon?Object(x.jsx)("div",{children:"Loading..."}):Object(x.jsx)("div",{className:"OneCard",children:Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)("div",{children:[Object(x.jsx)("h2",{children:"SaleForm"}),Object(x.jsx)(R,{label:"Select the state of the card you're selling",htmlFor:"cardState",children:Object(x.jsxs)("select",{name:"cardState",onChange:this.handleChange,children:[Object(x.jsx)("option",{disabled:!0,children:"Select"}),Object(x.jsx)("option",{value:"Mint",children:"Mint"}),Object(x.jsx)("option",{value:"Near Mint",children:"Near Mint"}),Object(x.jsx)("option",{value:"Bad",children:"Bad"})]})}),Object(x.jsxs)("p",{children:[Object(x.jsx)("b",{children:"Initial Price :"})," ",this.props.card.pokemonTCGId.cardmarket.prices.averageSellPrice]}),Object(x.jsx)(R,{label:"Choose a price",htmlFor:"initialPrice",children:Object(x.jsx)("input",{type:"number",onChange:this.handleChange,value:this.state.initialPrice,name:"initialPrice"})}),Object(x.jsx)("button",{onClick:this.createBid,className:"template-button-all-cards",children:"Sell"})]})})})}}]),n}(a.Component),ce=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={openForExchange:e.props.card.openForExchange},e.handleClick=Object(D.a)(T.a.mark((function t(){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.updateCard(e.props.card._id,{openForExchange:!e.props.card.openForExchange});case 3:e.props.update(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.error(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])}))),e}return Object(l.a)(n,[{key:"render",value:function(){return Object(x.jsxs)("div",{children:[!this.props.card.openForExchange&&Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"Not open for exchanges"}),Object(x.jsx)("button",{onClick:this.handleClick,className:"template-button-all-cards",children:"Accept exchanges"})]}),this.props.card.openForExchange&&Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"Open for exchanges"}),Object(x.jsx)("button",{onClick:this.handleClick,className:"template-button-all-cards",children:"Refuse exchange"})]})]})}}]),n}(a.Component),se=(n(75),function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={cards:null,searchName:"",callForm:!1},e.getAllCards=Object(D.a)(T.a.mark((function e(){var t,n,a,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.getAllUserCards();case 3:return t=e.sent,n=t.map((function(e){return b.getOneCardFromApi(e.pokemonTCGId)})),e.next=7,Promise.all(n);case 7:return a=e.sent,r=t.map((function(e,t){return Object(g.a)(Object(g.a)({},e),{},{pokemonTCGId:a[t]})})),e.abrupt("return",r);case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),e.updateStatus=function(){e.getAllCards()},e.callForm=function(){e.setState({callForm:!0})},e.closeForm=function(){e.setState({callForm:!1})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(D.a)(T.a.mark((function e(){var t=this;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getAllCards().then((function(e){t.setState({cards:e})})).catch((function(e){return console.error(e)}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return null===this.state.cards?Object(x.jsx)(Y,{}):Object(x.jsxs)("div",{className:"CardsList",children:[Object(x.jsx)("h2",{children:"ALL USER'S CARDS"}),this.state.cards.map((function(t){return Object(x.jsxs)("div",{children:[Object(x.jsxs)(U,{card:t.pokemonTCGId,link:"/profile/cards/"+t._id,children:[Object(x.jsx)("button",{onClick:e.callForm,children:"Sell"}),Object(x.jsx)(ce,{card:t,update:e.updateStatus})]}),e.state.callForm&&Object(x.jsx)(re,{card:t,closeForm:e.closeForm})]},t._id)}))]})}}]),n}(a.Component)),ie=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleAccept=Object(D.a)(T.a.mark((function t(){var n,a;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.auction.item,a={owner:e.props.auction.buyer,onSale:!1,price:null},t.next=4,b.updateCard(n._id,a);case 4:return t.next=6,b.deleteBid(e.props.auction._id);case 6:console.log("bid finished");case 7:case"end":return t.stop()}}),t)}))),e.handleDelete=Object(D.a)(T.a.mark((function t(){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.deleteBid(e.props.auction._id);case 2:console.log("bid deleted");case 3:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(n,[{key:"render",value:function(){return console.log(this.props),Object(x.jsxs)("div",{children:[Object(x.jsx)(U,{card:this.props.auction.pokemonTCGId}),Object(x.jsxs)("div",{children:["Current Offer : ",this.props.auction.currentBid]}),Object(x.jsx)("button",{onClick:this.handleAccept,className:"template-button-all-cards",children:"Accept the offer"}),Object(x.jsx)("button",{onClick:this.handleDelete,className:"template-button-all-cards",children:"Remove card from sale"})]},this.props.auction._id)}}]),n}(a.Component),oe=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={auctions:[]},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(D.a)(T.a.mark((function e(){var t,n,a,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.findUserAuctions();case 2:return t=e.sent,n=t.map((function(e){return b.getOneCardFromApi(e.item.pokemonTCGId)})),e.next=6,Promise.all(n);case 6:a=e.sent,r=t.map((function(e,t){return Object(g.a)(Object(g.a)({},e),{},{pokemonTCGId:a[t]})})),this.setState({auctions:r});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(x.jsxs)("div",{children:[Object(x.jsx)("h1",{children:"Your auctions"}),Object(x.jsx)("p",{children:"Here are all the bids you received for your ongoing auctions."}),0===this.state.auctions.length&&Object(x.jsx)(te,{children:Object(x.jsx)("p",{children:"You don't have any bids from your open auctions right now."})}),Object(x.jsx)("div",{children:this.state.auctions.map((function(e){return Object(x.jsx)(ie,{auction:e})}))})]})}}]),n}(a.Component),le=(n(76),function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={cards:null},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(D.a)(T.a.mark((function e(){var t,n,a,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.getAllCardsOpenForExchange();case 2:return t=e.sent,n=t.map((function(e){return b.getOneCardFromApi(e.pokemonTCGId)})),e.next=6,Promise.all(n);case 6:a=e.sent,r=t.map((function(e,t){return Object(g.a)(Object(g.a)({},e),{},{pokemonTCGId:a[t]})})),this.setState({cards:r});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return console.log(this.state.cards),null===this.state.cards?Object(x.jsx)("div",{children:"Loading..."}):Object(x.jsxs)("div",{children:[Object(x.jsx)("h2",{children:"Cards open for exchanges"}),Object(x.jsx)(ne,{children:Object(x.jsx)("p",{children:"Here are all the cards available for an exchange."})}),Object(x.jsxs)("div",{className:"exchange-div",children:[0===this.state.cards.length&&Object(x.jsx)(te,{children:"There are no cards available for an exchange right now."}),this.state.cards.map((function(e){return Object(x.jsx)(U,{card:e.pokemonTCGId,children:Object(x.jsx)(i.b,{to:"/cards/"+e.pokemonTCGId.id,className:"template-button-all-cards",children:"Card details"})},e._id)}))]})]})}}]),n}(a.Component)),de=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={loading:!0,items:null},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(D.a)(T.a.mark((function e(){var t,n,a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.props.items.map((function(e){return b.getOneCardFromApi(e.pokemonTCGId)})),e.next=4,Promise.all(t);case 4:n=e.sent,a=this.props.items.map((function(e,t){return Object(g.a)(Object(g.a)({},e),{},{pokemonTCGId:n[t]})})),this.setState({items:a,loading:!1}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return!0===this.state.loading?Object(x.jsx)(Y,{}):Object(x.jsx)("div",{children:Object(x.jsx)("ul",{children:this.state.items.map((function(e){return Object(x.jsx)("li",{children:Object(x.jsxs)("div",{children:[Object(x.jsx)("img",{src:e.pokemonTCGId.images.small,alt:"photo "+e.pokemonTCGId.name}),Object(x.jsx)("p",{children:e.pokemonTCGId.name}),Object(x.jsxs)("p",{children:["Average sell price : ",e.pokemonTCGId.cardmarket.prices.averageSellPrice]})]})},e._id+3)}))})})}}]),n}(a.Component),ue=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleAccept=function(t){e.props.handleAccept(t)},e.handleDecline=function(t){e.props.handleDecline(t)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(x.jsxs)("div",{children:[Object(x.jsx)(U,{card:this.props.exchange.pokemonTCGId}),Object(x.jsx)("div",{children:Object(x.jsxs)("p",{children:["Initial price of my card : ",this.props.exchange.pokemonTCGId.cardmarket.prices.averageSellPrice]})}),Object(x.jsx)(de,{items:this.props.exchange.buyerItem}),Object(x.jsxs)("div",{children:[Object(x.jsx)("button",{onClick:function(){e.handleAccept(e.props.exchange)},className:"template-button-all-cards",children:"Accept Offer"}),Object(x.jsx)("button",{onClick:function(){e.handleDecline(e.props.exchange)},className:"template-button-all-cards",children:"Decline Offer"})]})]},this.props.exchange.sellerItem._id+1)}}]),n}(r.a.Component),he=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={exchanges:null,loading:!0},e.getAllExchangeOffers=Object(D.a)(T.a.mark((function t(){var n,a,r,c;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.getExchangeOffers();case 3:return n=t.sent,a=n.map((function(e){return b.getOneCardFromApi(e.sellerItem.pokemonTCGId)})),t.next=7,Promise.all(a);case 7:r=t.sent,c=n.map((function(e,t){return Object(g.a)(Object(g.a)({},e),{},{pokemonTCGId:r[t]})})),e.setState({exchanges:c}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])}))),e.handleAccept=function(){var t=Object(D.a)(T.a.mark((function t(n){var a,r,c,s;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={owner:n.buyer,openForExchange:!1},t.next=4,b.updateCard(n.sellerItem._id,a);case 4:return r=t.sent,console.log(r),c={owner:n.seller,openForExchange:!1},s=n.buyerItem.map((function(e){return b.updateCard(e._id,c)})),t.next=10,Promise.all(s);case 10:return t.next=12,b.deleteExchange(n._id);case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),console.error(t.t0);case 17:e.handleClick();case 19:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}(),e.handleDecline=function(){var t=Object(D.a)(T.a.mark((function t(n){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.deleteExchange(n._id);case 2:e.handleClick();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleClick=function(){e.getAllExchangeOffers()},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(D.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getAllExchangeOffers(),this.setState({loading:!1});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return null===this.state.exchanges?Object(x.jsx)(Y,{}):Object(x.jsxs)("div",{children:[Object(x.jsx)("h2",{children:"Offers for exchange"}),Object(x.jsx)(ne,{children:Object(x.jsx)("p",{children:"Here are all the offers of exchange you have received."})}),0===this.state.exchanges.length&&Object(x.jsx)(te,{children:"You don't have offers for exchanges yet..."}),!this.state.loading&&Object(x.jsx)("div",{children:this.state.exchanges.map((function(t){return Object(x.jsx)(ue,{exchange:t,handleDecline:e.handleDecline,handleAccept:e.handleAccept})}))})]})}}]),n}(a.Component);var pe=function(){return Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)("header",{children:Object(x.jsx)(k,{})}),Object(x.jsx)("body",{children:Object(x.jsxs)(m.d,{children:[Object(x.jsx)(m.b,{exact:!0,path:"/",component:C}),Object(x.jsx)(m.b,{exact:!0,path:"/signin",component:S}),Object(x.jsx)(m.b,{exact:!0,path:"/signup",component:F}),Object(x.jsx)(m.b,{exact:!0,path:"/cards",component:W}),Object(x.jsx)(m.b,{exact:!0,path:"/cards/:id",component:Z}),Object(x.jsx)(m.b,{exact:!0,path:"/auctions",component:ae}),Object(x.jsx)(m.b,{exact:!0,path:"/exchanges",component:le}),Object(x.jsx)(E,{exact:!0,path:"/profile",component:_}),Object(x.jsx)(E,{path:"/profile/cards",component:se}),Object(x.jsx)(E,{exact:!0,path:"/profile/cards/:id",component:re}),Object(x.jsx)(E,{path:"/profile/auctions",component:oe}),Object(x.jsx)(E,{path:"/profile/exchanges",component:he})]})})]})};n(77),n(78);s.a.render(Object(x.jsx)(i.a,{children:Object(x.jsx)(O,{children:Object(x.jsx)(pe,{})})}),document.getElementById("root"))}},[[79,1,2]]]);
//# sourceMappingURL=main.6007fefe.chunk.js.map